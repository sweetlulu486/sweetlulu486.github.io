---
layout:     post
title:      "HTTP에 대한 기본 내용"
date:       2019-10-08 00:35:12
categories: 네트워크
tags:       Basic
---

* Content
{:toc}

HTTP는 Request와 Response를 이용. HTTP는 Stateless 프로토콜. HTTP는 URI로 리소스를 식별. HTTP는 처리 방식을 정하도록 지정. HTTP가 Stateless한 이유. Stateless한 점을 해소하기 위해서. 쿠키의 등장.



## HTTP는 Request와 Response를 이용

HTTP를 사용하여 2대의 컴퓨터 간에 통신을 하는 경우 한 번 통신을 할 때마다 반드시 어느 한 쪽은 클라이언트가 되고 다른 한 쪽의 서버가 됩니다. 경우에 따라서는 2대의 컴퓨터 간에 클라이언트와 서버가 바뀌는 일도 있을 수 있지만 한 번 통신했을 때만 본다면 클라이언트와 서버의 역할은 반드시 정해져 있습니다.

HTTP는 클라이언트로 부터 리퀘스트가 송신되며, 그 결과가 서버로부터 리스폰스로 되돌아옵니다. 즉, 반드시 클라이언트 측으로부터 통신이 시작됩니다.

## HTTP는 Stateless 프로토콜

HTTP에서는 새로운 리퀘스트가 보내질 때 마다 새로운 리스폰스가 생성됩니다. 프로토콜로서는 과거의 리퀘스트나 리스폰스 정보를 전혀 가지고 있지 않습니다. 이는 많은 데이터를 매우 빠르고 확실하게 처리하는 범위성을 확보하기 위해서 이와 같이 간단하게 설계되어 있는 것입니다.

그러나 웹이 진화함에 따라, Stateless 특성만으로는 처리하기 어려운 일이 증가하게 되었습니다. 예를 들면, 쇼핑 사이트에 로그인했을 때 입니다. 다른 페이지로 이동하더라도 로그인 상태를 유지할 필요가 있습니다. 이를 위해서는 누가 어떤 리퀘스트를 보냈는지를 파악하기 위해 상태를 유지할 필요가 있습니다. 상태를 계속 유지하고 싶은 요구에 부응하기 위해서 쿠키라는 기술이 도입되었습니다.

## HTTP는 URI로 리소스를 식별

HTTP는 URI를 사용하여 인터넷 상의 리소스를 호출할 수 있습니다.

## HTTP는 처리 방식을 정하도록 지정

GET 메소드는 리퀘스트 URI로 식별된 리소스를 호출합니다. 가져올 리소스 내용은 지정된 리소스를 서버가 해석한 결과입니다. 

POST 메소드는 엔티티를 전송하기 위해서 사용됩니다. DB의 값을 조작하는 경우 이 메소드를 사용하는 것이 좋습니다.

## HTTP가 Stateless한 이유

초기 당시의 통신에서는 작은 사이즈의 텍스트를 보내는 정도였기 때문에 이렇게 기능을 구현해도 문제는 없었습니다. 그러나 HTTP가 널리 보급되어감에 따라, 다량의 이미지를 포함한 문서 등이 늘어났습니다.

예를 들면, 하나의 HTML에 여러 이미지가 포함되어 있는 경우 브라우저를 사용해서 리퀘스트를 하면 HTML 문서에 포함되어 있는 이미지를 획득하기 위해서 여러 리퀘스트를 송신합니다. 그렇기 떄문에 리퀘스트를 보낼 때 마다 매번 TCP 연결과 종료를 하게 되는 쓸모 없는 일이 발생 되어 통신량이 늘어나게 됩니다.

## Stateless한 점을 해소하기 위해서

HTTP/1.1과 HTTP/1.0에서는 TCP 연결 문제를 해결하기 위해서 지속 연결이라는 방법을 고안하였습니다. 지속 연결의 특징은 어느 한 쪽이 명시적으로 연결을 종료하지 않는 이상 TCP 연결을 계속 유지합니다.

지속 연결을 하는 이점은 TCP 커넥션의 연결과 종료를 반복되는 오버헤드를 줄여주기 때문에 서버에 대한 부하가 경감됩니다. 또한, 오버헤드를 줄인 만큼 HTTP 리퀘스트와 리스폰스가 빠리게 완료되기 때문에 웹 페이지를 빨리 표시할 수 있습니다.

## 쿠키의 등장

쿠키는 리퀘스트와 리스폰스에 쿠키 정보를 추가해서 클라이언트의 상태를 파악하기 위한 시스템입니다.

쿠키는 서버에 리스폰스로 보내진 Set-Cookie라는 헤더 필드에 의해 쿠키르 클라이언트에 보존하게 됩니다. 다은 번에 클라이언트가 같은 서버로 리퀘스트를 보낼 때, 자동으로 쿠키 값을 넣어서 송신합니다. 서버는 클라이언트가 보낸 쿠키를 확인해서 어느 클라이언트가 접속했는지 체크하고 서버 상의 기록을 확인해서 이전 상태를 알 수 있습니다.

1. 클라이언트가 리퀘스트를 보냅니다.
2. 서버가 리스폰스에 쿠키를 붙여서 답장을 합니다.
3. 클라이언트가 다시 리퀘스트를 보냅니다. 이때는 가지고 있는 쿠키를 붙여서 서버에 리퀘스트를 보냅니다.
