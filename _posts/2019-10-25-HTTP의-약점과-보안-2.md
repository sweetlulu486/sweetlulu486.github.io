---
layout:     post
title:      "HTTP의 약점과 보안 2"
date:       2019-10-25 18:30:12
categories: 네트워크
tags:       Basic
---

* Content
{:toc}

미리보기



## 완전성을 증명할 수 없기 때문에 변조 가능

완전성이란 정보의 정확성을 가리킵니다. 그것을 증명할 수 없다는 것은 정보가 정확한지 아닌지를 확인할 수 없음을 의미합니다·

### 수신한 내용이 다를지도 모른다

ITTP가 완전성을 증명할 수 없다는 뜻은 만약 리퀘스트나 리스폰스가 발신된 후에 상대가 수신할 때까지의 사이에 변조되었다고 하더라도 이 사실을 알 수 없다는 뜻입니다 즉, 발신된 리퀘스트나 리스폰스와 수신한 리퀘스트나 리스폰스가 같은지 아닌지를 확인할 수 없다는 의미입니다.

예를 들어, 어떤 웹 사이트에서 콘텐츠를 다운로드 했다고 하면 클라이언트에 다운로드한 파일과 서버 상에 있는 파일이 정말로 같은 것인지 아닌지 모른다는 것입니다. 콘텐츠가 도중에 다른 내용으로 변경되었을지도 모릅니다 만약에 콘텐츠가 다른 것으로 변경되었다 하더라도 수신한 측에서 알아챌 수 없습니다.
이와 같이 공격자가 도중에 리퀘스트나 리스폰스를 빼앗아 변조하는
간자 공격(Man-in-the-Middle 공격)이라고 부릅니다.


### 변조를 방지하려면?

HTTP를 사용해서 완전성을 확인하기 위한 방법은 있지만, 확실하면서 편리한 방법은 현재로서는 존재하지 않습니다 그 중에서도 자주 사용되고 있는 방법은 MD5나 SHA-1 등의 해시 값을 확인하는 방법과 파일의 디지털 서명을 확인하는 방법입니다.
그러나 아쉽게도 이 방법으로 확실히 확인할 수 있는 것은 아닙니다. 그것은 PGP와 MD4 자체도 적절하게 수정되어 있다고 하낟면, 유저로서는 알 수가 없습니다. 확실히 방지하기에는 HTTPS를 사용할 필요가 있습니다.

## HTTP는 SSL의 껍질을 덮어쓴 HTTP

HTTP는 직접 TCP와 소통하지만 SSL을 사용한 경우에 __HTTP는 SSL과 통신하고 SSL이 TCP와 통신__ 하게 됩니다. 즉, SSL이라는 껍질을 덮어쓴 HTTP가 HTTPS인것입니다.

### 상호간에 키를 교환하는 공개키 암호화 방식

SSL을 설명하기 전에 암호화 방식에 대해서 설명합니다. SSL에서는 공개키 암호화 방식이라 불리는 암호화 방식을 채용하고 있습니다.

__현대의 암호는 알고리즘이 공개되어 있고 키를 비밀에 부침으로써 안전성을 유지__ 합니다. 암호화나 복호화할 때 이 키를 사용합니다. 키가 없으면 암호를 풀 수는 없지만 키를 가지고 있다면 누구라도 암호를 풀 수가 있습니다. 공격자가 키를 알게 되면 암호화가 의미를 잃어버리게 됩니다.

### 공통키 암호의 딜레마

암호화와 복호화에 하나의 키를 같이 사용하는 방식을 공통키 암호라고 부릅니다.
공통키 암호화 방식은 상대방에게 키를 넘겨주지 않으면 안됩니다. 그러나 어떻게 해서 안전하게 키를 상대에게 배송하면 좋을까요? 네트워크를 사용해서 넘겨줄 때 통신이 도청되어 공격자에게 키를 빼앗기게 되면 암호화가 의미없게 되어 버립니다. 또한, 받은 키를 안전하게 보관하기 위한 노력을 하지 않으면 안됩니다.

### 두 개의 키를 사용하는 공개키 암호

공통키 암호의 문제를 해결하려고 한 것이 공개키 암호라는 방식입니다 공개 키 암호에서는 서로 다른 두 개의 키 페어(쌍)를 사용합니다 한쪽은 비밀키(private key)라 부르고 다른 한쪽은 공개키(public key)라고 부릅니다 이름대로 비밀키는 누구에게도 알려지면 안되는 키이며 공개키는 누구에게나 알려져도 괜찮은 키입니다.

공개키 암호를 사용한 암호화는 암호를 보내는 측이 상대의 공개키를 사용해 암호화를 합니다 그리고 암호화된 정보를 받아들인 상대는 자신의 비밀키를 사용해 복호화를 실시합니다. 이 방식은 암호를 푸는 비밀키를 통신으로 보낼 필요가 없기 때문에 도청에 의해서 키를 빼앗길 걱정은 없습니다.

또, 암호문과 공개키라는 정보에서 평문을 구하는 것은 매우 어려운 수학적인 특징이 있기 때문에 간단하지는 않습니다. 만약 큰 수의 소인수 분해를 고속으로 할 수 있다면 해독할 수 있지만, 현재로선 쉽지 않습니다.

> [그림으로 배우는 HTTP & Network Basic(영진닷컴, 이병억)](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788931447897&orderClick=LEA&Kc=) 에 있는 내용을 정리한 것입니다.
